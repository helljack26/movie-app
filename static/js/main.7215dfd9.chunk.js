(this["webpackJsonpmovie-app"]=this["webpackJsonpmovie-app"]||[]).push([[0],[,,,,function(t,e,a){t.exports={navbar:"Navbar_navbar__1ibgM",navbarBlock:"Navbar_navbarBlock__FqLsY",navbarLink:"Navbar_navbarLink__2f62k",active:"Navbar_active__3_mGo",emptyInput:"Navbar_emptyInput__3-JNo"}},,,,,,function(t,e,a){t.exports={filmDetailsMain:"FilmDetailsPage_filmDetailsMain__sMcAO",header:"FilmDetailsPage_header__1Z2Q9",headerBlock:"FilmDetailsPage_headerBlock__3sFij",filmName:"FilmDetailsPage_filmName__Gsbdd",main:"FilmDetailsPage_main__MZ50w",detailBlock:"FilmDetailsPage_detailBlock__2DbLQ",poster:"FilmDetailsPage_poster__Xkz5-","description-header":"FilmDetailsPage_description-header__3rzif","description-text":"FilmDetailsPage_description-text__EGFuX",detailItem:"FilmDetailsPage_detailItem__30GPK",detailProperty:"FilmDetailsPage_detailProperty__3HPFH",logo:"FilmDetailsPage_logo__1FtTx"}},function(t,e,a){t.exports={addIconBtn:"AddToWatchListButton_addIconBtn__1FiIX",addIcon:"AddToWatchListButton_addIcon__10vcu",inWatch:"AddToWatchListButton_inWatch__2pN5P",detailsBtn:"AddToWatchListButton_detailsBtn__1iEdK",detailsNotInWatch:"AddToWatchListButton_detailsNotInWatch__2Wz1R",detailsInWatch:"AddToWatchListButton_detailsInWatch__2PSJo",tooltip:"AddToWatchListButton_tooltip__xj8zY",odsoky:"AddToWatchListButton_odsoky__3DuX9",tooltipForRemove:"AddToWatchListButton_tooltipForRemove__gJ7YT",left:"AddToWatchListButton_left__2GxAX",tooltipLeft:"AddToWatchListButton_tooltipLeft__fUH7y"}},function(t,e,a){t.exports={popularHeader:"FilmList_popularHeader__2-BXf",filmListBlock:"FilmList_filmListBlock__sz4Pi"}},,function(t,e,a){t.exports={filmListCard:"FilmListCard_filmListCard__2KqoP",filmName:"FilmListCard_filmName__2B7Xz",genre:"FilmListCard_genre___xqVm",filmDescription:"FilmListCard_filmDescription__1ejhE",cardBlock:"FilmListCard_cardBlock__3J-pU"}},,function(t,e,a){t.exports={addIconBtn:"DetailsAddToWatchListButton_addIconBtn__2ts_2",addIcon:"DetailsAddToWatchListButton_addIcon__3KDtX",inWatch:"DetailsAddToWatchListButton_inWatch__B2piB",detailsBtn:"DetailsAddToWatchListButton_detailsBtn__384KX",detailsNotInWatch:"DetailsAddToWatchListButton_detailsNotInWatch__3H3Lj",detailsInWatch:"DetailsAddToWatchListButton_detailsInWatch__2ufpu",tooltip:"DetailsAddToWatchListButton_tooltip__27nmr",odsoky:"DetailsAddToWatchListButton_odsoky__2T-LC",tooltipForRemove:"DetailsAddToWatchListButton_tooltipForRemove__Xlckm",left:"DetailsAddToWatchListButton_left__1x-bm"}},,,function(t,e,a){t.exports={inputBlock:"QueryInput_inputBlock__ZU4Uk",input:"QueryInput_input__HI4lQ",searchBtn:"QueryInput_searchBtn__TasYX"}},,,function(t,e,a){t.exports={header:"Header_header__1-7_3",logo:"Header_logo__2uxjA"}},function(t,e,a){t.exports={spinnerBlock:"LoadingPage_spinnerBlock__1tIoP",spinner:"LoadingPage_spinner__2vZh7",spin:"LoadingPage_spin__2_x5m"}},,,,,,,,,,,,,,,function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(1),c=a(18),i=a.n(c),r=a(3),s=a(6),o=a(2),l=a(10),d=a.n(l),u=a(22),j=a.n(u),m=a(19),p=a.n(m),b=a(26),h="SET_FILM_LIST",_="UPDATE_PAGE_TITLE",f="UPDATE_SEARCH_FILM",O="SET_FILM_DETAILS",v="SET_WATCH_LIST",x=" SET_LOADING",g=function(t){return{type:h,payload:t}},N=function(t){return{type:_,payload:t}},L=function(t){return{type:f,payload:t}},y=function(t){return{type:v,payload:t}},B=function(t){return{type:x,payload:t}},W=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,a){var n=a(),c=n.filmApi.searchFilm,i=n.filmApi.filmList;""!==c&&e(B(!0)),!0===t&&e(B(!0));var r,s={popular:"https://api.themoviedb.org/3/trending/movie/day?api_key=4d0c68776909a3f926088d7ddf14c097",search:"https://api.themoviedb.org/3/search/movie?api_key=4d0c68776909a3f926088d7ddf14c097&query=".concat(c)};c?(r=s.search,e(N('Search results for "'.concat(c,'"')))):(r=s.popular,e(N("Popular films"))),fetch(r).then((function(t){return t.json()})).then((function(t){var a=t.errors?null:k(t.results,e);return e(g(a)),0===a.length?(e(N('Nothing was found for "'.concat(c,'"'))),e(g(i))):null})),e(L("")),setTimeout((function(){return e(B(!1))}),700)}},k=function(t,e){var a=t.map((function(t){var e=t.title,a=t.name;return{name:e||a,poster_path:t.poster_path,genre_ids:t.genre_ids,id:t.id,inWatch:!1}}));var n=JSON.parse(window.localStorage.getItem("watchList"));return!0===(null!==n)?(e(y(n)),a.map((function(t){return function(t){var e=n.find((function(e){return e.id===t.id}));return!0===Boolean(e)?e:t}(t)}))):a},I=function(t,e,a,n){return function(c,i){var r,s=i().filmApi.watchList,o=!0===!!(void 0===t&&void 0===e&&void 0===a)?(r=n,s.filter((function(t){return t.id!==r}))):function(c,i){var r={name:t,poster_path:e,genre_ids:a,id:n,inWatch:!0};return s.push(r),Object(b.a)(new Map(c.map((function(t){return[t[i],t]}))).values())}(s,"id");return localStorage.setItem("watchList",JSON.stringify(o)),c(y(o))}},T=a.p+"static/media/search.207a0bfb.svg",F=a(0),A=function(){var t=Object(r.b)(),e=Object(r.c)((function(t){return t.filmApi.searchFilm}));return Object(F.jsxs)("div",{className:p.a.inputBlock,children:[Object(F.jsx)("input",{className:p.a.input,placeholder:"Search film",name:"query",id:"gender",onKeyPress:function(e){return function(e){"Enter"===e.key&&""!==e.target.value&&t(W())}(e)},onInput:function(e){return t(L(e.target.value))}}),Object(F.jsx)("button",{className:p.a.searchBtn,onClick:function(){return""!==e?t(W()):null},children:Object(F.jsx)("img",{src:T,alt:"search icon"})})]})},w=a(4),D=a.n(w),P=function(t){var e=t.active,a=Object(r.c)((function(t){return t.filmApi.filmPageTitle})),n=a.includes("Search results for")||a.includes("Nothing was found for")?"Finding films":e.active,c=Object(r.b)();switch(n){case"popular":return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)("div",{id:"navbar",className:D.a.navbar,children:[Object(F.jsxs)("div",{className:D.a.navbarBlock,children:[Object(F.jsx)(s.b,{id:"popular",to:"/movie-app",className:"".concat(D.a.navbarLink," ").concat(D.a.active),children:"Popular"}),Object(F.jsx)(s.b,{id:"watch",to:"/watch-list",className:D.a.navbarLink,children:"Watch list"})]}),Object(F.jsx)(A,{})]})});case"watch":return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)("div",{id:"navbar",className:D.a.navbar,children:[Object(F.jsxs)("div",{className:D.a.navbarBlock,children:[Object(F.jsx)(s.b,{id:"popular",to:"/movie-app",className:D.a.navbarLink,onClick:function(){return c(W(!0))},children:"Popular"}),Object(F.jsx)(s.b,{id:"watch",to:"/watch-list",className:"".concat(D.a.navbarLink," ").concat(D.a.active),children:"Watch list"})]}),Object(F.jsx)("div",{className:D.a.emptyInput})]})});case"Finding films":return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)("div",{id:"navbar",className:D.a.navbar,children:[Object(F.jsxs)("div",{className:D.a.navbarBlock,children:[Object(F.jsx)(s.b,{id:"popular",to:"/movie-app",className:D.a.navbarLink,onClick:function(){return c(W(!0))},children:"Popular"}),Object(F.jsx)(s.b,{id:"watch",to:"/watch-list",className:D.a.navbarLink,children:"Watch list"})]}),Object(F.jsx)(A,{})]})});default:return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)("div",{id:"navbar",className:D.a.navbar,children:[Object(F.jsxs)("div",{className:D.a.navbarBlock,children:[Object(F.jsx)(s.b,{id:"popular",to:"/movie-app",className:D.a.navbarLink,onClick:function(){return c(W(!0))},children:"Popular"}),Object(F.jsx)(s.b,{id:"watch",to:"/watch-list",className:D.a.navbarLink,children:"Watch list"})]}),Object(F.jsx)("div",{className:D.a.emptyInput})]})})}},S=function(t){return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)("header",{className:j.a.header,children:[Object(F.jsx)("h1",{className:j.a.logo,children:"Movie api"}),Object(F.jsx)(P,{active:t})]})})},C=a(23),E=a.n(C),H=function(){return Object(F.jsx)("div",{className:E.a.spinnerBlock,children:Object(F.jsx)("div",{className:E.a.spinner})})},M=a(9),X=a(16),J=a.n(X),R={detailsInWatch:{type:"detailsInWatch",text:Object(F.jsxs)("span",{children:["Delete from ",Object(F.jsx)("br",{})," watch list"]})},detailsNotInWatch:{type:"detailsNotInWatch",text:Object(F.jsxs)("span",{children:["Add to",Object(F.jsx)("br",{})," watch list"]})}},G=function(t){var e=t.name,a=t.image,c=t.genre,i=t.id,s=t.buttonType,o=Object(r.b)(),l=Object(n.useState)(),d=Object(M.a)(l,2),u=d[0],j=d[1];return(void 0===u?s:u)?Object(F.jsx)("button",{type:"button",className:"".concat(J.a.detailsBtn," ").concat(J.a.detailsNotInWatch),onClick:function(){o(I(e,a,c,i)),j(!1)},children:R.detailsNotInWatch.text}):Object(F.jsx)("button",{type:"button",className:"".concat(J.a.detailsBtn," ").concat(J.a.detailsInWatch),onClick:function(){o(I(void 0,void 0,void 0,i)),j(!0)},children:R.detailsInWatch.text})};function U(t){function e(t){switch(t){case 28:return"Action";case 12:return"Adventure";case 16:return"Cartoons";case 35:return"Comedy";case 80:return"Crime";case 99:return"Documentary";case 18:return"Drama";case 10751:return"Family";case 14:return"Fantasy";case 36:return"Historical";case 27:return"Horror";case 10402:return"Musical";case 9648:return"Mystic";case 10749:return"Romantic";case 878:return"Science fiction";case 10770:return"Telecast";case 53:return"Thriller";case 10752:return"Military";case 10759:return"Action & Adventure";case 10764:return"On real events";case 10762:return"Child";case 10763:return"News";case 10765:return"Science fiction and fantasy";case 10766:return"Melodrama";case 10767:return"Podcast";case 10768:return"War and politics";case 37:return"Western";default:return}}return t.map((function(a,n){return t.length>=1?n<t.length-1?Object(F.jsxs)("span",{children:[e(a),", "]},n):Object(F.jsx)("span",{children:e(a)},n):null}))}var z=function(t){var e=t.property,a=t.value;return Object(F.jsxs)("div",{className:d.a.detailItem,children:[Object(F.jsxs)("p",{className:d.a.detailProperty,children:[e,": "]}),Object(F.jsx)("p",{children:a})]})},K=function(t){var e=JSON.parse(window.localStorage.getItem("watchList")),a=null!==e&&e.find((function(e){return e.id===t}));return!Boolean(a)},Q=function(){var t=Object(r.b)(),e=Object(o.g)(),a=Object(o.e)();console.log(a),Object(n.useEffect)((function(){t(B(!0));var a="https://api.themoviedb.org/3/movie/".concat(e.id,"?api_key=4d0c68776909a3f926088d7ddf14c097");fetch(a).then((function(t){return t.json()})).then((function(e){return t({type:O,payload:e}),setTimeout((function(){return t(B(!1))}),700)}))}),[t,e.id]);var c=Object(r.c)((function(t){return t.filmApi.filmDetails})),i=Object(r.c)((function(t){return t.filmApi.loading})),s=void 0!==c.genres&&null!==c.genres&&""!==c.genres,l=s?c.genres.map((function(t){return t.id})):null,u=s?U(c.genres.map((function(t){return t.id}))):null;return Object(F.jsx)(F.Fragment,{children:i?Object(F.jsx)(H,{}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(S,{}),Object(F.jsxs)("div",{className:d.a.filmDetailsMain,children:[Object(F.jsxs)("div",{className:d.a.header,children:[Object(F.jsx)("div",{className:d.a.headerBlock,children:Object(F.jsx)("h1",{className:d.a.filmName,children:c.title})}),Object(F.jsx)(G,{name:c.title,image:c.poster_path,genre:l,id:c.id,buttonType:K(c.id)})]}),Object(F.jsxs)("div",{className:d.a.main,children:[Object(F.jsx)("img",{src:"https://image.tmdb.org/t/p/w500/".concat(c.poster_path),alt:"\u041f\u043e\u0441\u0442\u0435\u0440 \u043a \u0444\u0438\u043b\u044c\u043c\u0443 ".concat(c.title),className:d.a.poster}),Object(F.jsxs)("div",{className:d.a.detailBlock,children:[Object(F.jsx)(z,{property:"Jenres",value:u}),Object(F.jsx)(z,{property:"Production",value:c.production_companies.map((function(t){return'"'.concat(t.name,'" ')}))}),Object(F.jsx)(z,{property:"Runtime",value:"".concat(c.runtime," minutes")}),Object(F.jsx)(z,{property:"Review",value:c.overview})]})]})]})]})})},q=a(14),Y=a.n(q),Z=a(11),V=a.n(Z),$=a.p+"static/media/check-circle.589a7a40.svg",tt=a.p+"static/media/plus.1a0b65ab.svg",et={class:"inWatch",tooltip:"Remove from Watch list"},at={class:"notInWatch",tooltip:"Add to Watch list"},nt=function(t){var e=t.name,a=t.image,c=t.genre,i=t.id,s=t.buttonType,o=Object(r.b)(),l=Object(n.useState)(),d=Object(M.a)(l,2),u=d[0],j=d[1],m=Object(n.useState)(at.tooltip),p=Object(M.a)(m,2),b=p[0],h=p[1];return(void 0===u?s:u)?Object(F.jsxs)("button",{type:"button",className:V.a.addIconBtn,children:[Object(F.jsx)("img",{src:$,alt:at.tooltip,className:V.a.inWatch,onClick:function(){o(I(void 0,void 0,void 0,i)),j(!1),h(at.tooltip)}}),Object(F.jsx)("div",{className:"".concat(V.a.tooltip," ").concat(V.a.tooltipLeft),children:Object(F.jsx)("p",{children:!0===s?et.tooltip:b})})]}):Object(F.jsxs)("button",{type:"button",className:V.a.addIconBtn,children:[Object(F.jsx)("img",{src:tt,alt:"Add to watch list",className:"".concat(V.a.addIcon," ").concat(V.a.notInWatch),onClick:function(){o(I(e,a,c,i)),j(!0),h(et.tooltip)}}),Object(F.jsx)("div",{className:V.a.tooltip,children:Object(F.jsx)("p",{children:b})})]})},ct=function(t){var e=t.name,a=t.image,n=t.genre,c=t.id,i=t.buttonType,o=Object(r.b)(),l=0!==n.length?Object(F.jsxs)("p",{children:["Genre: ",U(n)]}):null;return null!==a?Object(F.jsxs)("div",{className:Y.a.cardBlock,children:[Object(F.jsxs)(s.b,{to:"/".concat(c),className:Y.a.filmListCard,onClick:function(){return o(B(!0))},children:[Object(F.jsx)("img",{src:"https://image.tmdb.org/t/p/w500/".concat(a),alt:"\u041f\u043e\u0441\u0442\u0435\u0440 \u043a \u0444\u0438\u043b\u044c\u043c\u0443 ".concat(e)}),Object(F.jsxs)("div",{className:Y.a.filmDescription,children:[Object(F.jsx)("p",{className:Y.a.filmName,children:e}),Object(F.jsx)("div",{className:Y.a.genre,children:l})]})]}),Object(F.jsx)(nt,{name:e,image:a,genre:n,id:c,buttonType:i})]}):null},it=a(12),rt=a.n(it),st=function(t){var e=t.filmList,a=Object(r.c)((function(t){return t.filmApi.filmPageTitle}));return e?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{className:rt.a.popularHeader,children:Object(F.jsx)("h2",{children:a.includes("Nothing was found")?Object(F.jsxs)("span",{children:[a,Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),"Previous results"]}):a})}),Object(F.jsx)("main",{children:Object(F.jsx)("div",{className:rt.a.filmListBlock,children:e.map((function(t){var e=t.name,a=t.poster_path,n=t.genre_ids,c=t.id,i=t.inWatch;return Object(F.jsx)(ct,{id:c,name:e,image:a,genre:n,buttonType:i},c)}))})})]}):null},ot=function(){var t=Object(r.b)(),e=Object(r.c)((function(t){return t.filmApi.filmList}));Object(n.useEffect)((function(){t(W())}),[t]);var a=Object(r.c)((function(t){return t.filmApi.loading}));return Object(F.jsx)(F.Fragment,{children:a?Object(F.jsx)(H,{}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(S,{active:"popular"}),Object(F.jsx)(st,{filmList:e})]})})},lt=function(t){var e=t.watchList,a=void 0===e?[]:e,n=Object(r.c)((function(t){return t.filmApi.filmPageTitle}));return 0===a.length?Object(F.jsx)("div",{className:rt.a.popularHeader,children:Object(F.jsxs)("h2",{children:[n," is empty"]})}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{className:rt.a.popularHeader,children:Object(F.jsx)("h2",{children:n})}),Object(F.jsx)("main",{children:Object(F.jsx)("div",{className:rt.a.filmListBlock,children:null!==a?a.map((function(t){var e=t.name,a=t.poster_path,n=t.genre_ids,c=t.id,i=t.inWatch;return Object(F.jsx)(ct,{id:c,name:e,image:a,genre:n,buttonType:i},c)})):""})})]})},dt=function(){var t=Object(r.b)(),e=Object(r.c)((function(t){return t.filmApi.watchList}));return Object(n.useEffect)((function(){t(N("Watch List"));var e=window.localStorage.getItem("watchList"),a=JSON.parse(e);t(y(a))}),[t]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(S,{active:"watch"}),Object(F.jsx)(lt,{watchList:e})]})},ut=function(){return Object(F.jsx)(s.a,{children:Object(F.jsxs)(o.c,{children:[Object(F.jsx)(o.a,{path:"/movie-app",element:Object(F.jsx)(ot,{})}),Object(F.jsx)(o.a,{path:"/:id",element:Object(F.jsx)(Q,{})}),Object(F.jsx)(o.a,{path:"/watch-list",element:Object(F.jsx)(dt,{})})]})})},jt=(a(38),a(17)),mt=a(25),pt=a(8),bt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||jt.c,ht=Object(jt.d)(Object(jt.b)({filmApi:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filmList:[],filmPageTitle:"",searchFilm:"",filmDetails:[],watchList:[],loading:!0},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case h:return Object(pt.a)(Object(pt.a)({},t),{},{filmList:e.payload});case _:return Object(pt.a)(Object(pt.a)({},t),{},{filmPageTitle:e.payload});case f:return Object(pt.a)(Object(pt.a)({},t),{},{searchFilm:e.payload});case O:return Object(pt.a)(Object(pt.a)({},t),{},{filmDetails:e.payload});case v:return Object(pt.a)(Object(pt.a)({},t),{},{watchList:e.payload});case x:return Object(pt.a)(Object(pt.a)({},t),{},{loading:e.payload});default:return t}}}),bt(Object(jt.a)(mt.a))),_t=ht;i.a.render(Object(F.jsx)(r.a,{store:_t,children:Object(F.jsx)(ut,{})}),document.getElementById("root"))}],[[39,1,2]]]);
//# sourceMappingURL=main.7215dfd9.chunk.js.map