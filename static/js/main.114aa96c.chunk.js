(this["webpackJsonpmovie-app"]=this["webpackJsonpmovie-app"]||[]).push([[0],[,,,,function(t,e,a){t.exports={navbar:"Navbar_navbar__1ibgM",navbarBlock:"Navbar_navbarBlock__FqLsY",navbarLink:"Navbar_navbarLink__2f62k",active:"Navbar_active__3_mGo",emptyInput:"Navbar_emptyInput__3-JNo"}},,,,,,function(t,e,a){t.exports={filmDetailsMain:"FilmDetailsPage_filmDetailsMain__sMcAO",header:"FilmDetailsPage_header__1Z2Q9",headerBlock:"FilmDetailsPage_headerBlock__3sFij",filmName:"FilmDetailsPage_filmName__Gsbdd",main:"FilmDetailsPage_main__MZ50w",detailBlock:"FilmDetailsPage_detailBlock__2DbLQ",poster:"FilmDetailsPage_poster__Xkz5-","description-header":"FilmDetailsPage_description-header__3rzif","description-text":"FilmDetailsPage_description-text__EGFuX",detailItem:"FilmDetailsPage_detailItem__30GPK",detailProperty:"FilmDetailsPage_detailProperty__3HPFH",logo:"FilmDetailsPage_logo__1FtTx"}},function(t,e,a){t.exports={addIconBtn:"AddToWatchListButton_addIconBtn__1FiIX",addIcon:"AddToWatchListButton_addIcon__10vcu",inWatch:"AddToWatchListButton_inWatch__2pN5P",detailsBtn:"AddToWatchListButton_detailsBtn__1iEdK",detailsNotInWatch:"AddToWatchListButton_detailsNotInWatch__2Wz1R",detailsInWatch:"AddToWatchListButton_detailsInWatch__2PSJo",tooltip:"AddToWatchListButton_tooltip__xj8zY",odsoky:"AddToWatchListButton_odsoky__3DuX9",tooltipForRemove:"AddToWatchListButton_tooltipForRemove__gJ7YT",left:"AddToWatchListButton_left__2GxAX",tooltipLeft:"AddToWatchListButton_tooltipLeft__fUH7y"}},function(t,e,a){t.exports={popularHeader:"FilmList_popularHeader__2-BXf",filmListBlock:"FilmList_filmListBlock__sz4Pi"}},,function(t,e,a){t.exports={filmListCard:"FilmListCard_filmListCard__2KqoP",filmName:"FilmListCard_filmName__2B7Xz",genre:"FilmListCard_genre___xqVm",filmDescription:"FilmListCard_filmDescription__1ejhE",cardBlock:"FilmListCard_cardBlock__3J-pU"}},,function(t,e,a){t.exports={addIconBtn:"DetailsAddToWatchListButton_addIconBtn__2ts_2",addIcon:"DetailsAddToWatchListButton_addIcon__3KDtX",inWatch:"DetailsAddToWatchListButton_inWatch__B2piB",detailsBtn:"DetailsAddToWatchListButton_detailsBtn__384KX",detailsNotInWatch:"DetailsAddToWatchListButton_detailsNotInWatch__3H3Lj",detailsInWatch:"DetailsAddToWatchListButton_detailsInWatch__2ufpu",tooltip:"DetailsAddToWatchListButton_tooltip__27nmr",odsoky:"DetailsAddToWatchListButton_odsoky__2T-LC",tooltipForRemove:"DetailsAddToWatchListButton_tooltipForRemove__Xlckm",left:"DetailsAddToWatchListButton_left__1x-bm"}},,,function(t,e,a){t.exports={inputBlock:"QueryInput_inputBlock__ZU4Uk",input:"QueryInput_input__HI4lQ",searchBtn:"QueryInput_searchBtn__TasYX"}},,,function(t,e,a){t.exports={header:"Header_header__1-7_3",logo:"Header_logo__2uxjA"}},function(t,e,a){t.exports={spinnerBlock:"LoadingPage_spinnerBlock__1tIoP",spinner:"LoadingPage_spinner__2vZh7",spin:"LoadingPage_spin__2_x5m"}},,,,,,,,,,,,,,,function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(1),i=a(18),c=a.n(i),s=a(3),r=a(6),o=a(2),l=a(10),d=a.n(l),u=a(22),j=a.n(u),p=a(19),m=a.n(p),b=a(26),h="SET_FILM_LIST",_="UPDATE_PAGE_TITLE",f="UPDATE_SEARCH_FILM",O="SET_FILM_DETAILS",v="SET_WATCH_LIST",x=" SET_LOADING",g=function(t){return{type:h,payload:t}},N=function(t){return{type:_,payload:t}},L=function(t){return{type:f,payload:t}},y=function(t){return{type:v,payload:t}},B=function(t){return{type:x,payload:t}},W=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,a){var n=a(),i=n.filmApi.searchFilm,c=n.filmApi.filmList;""!==i&&e(B(!0)),!0===t&&e(B(!0));var s,r={popular:"https://api.themoviedb.org/3/trending/movie/day?api_key=4d0c68776909a3f926088d7ddf14c097",search:"https://api.themoviedb.org/3/search/movie?api_key=4d0c68776909a3f926088d7ddf14c097&query=".concat(i)};i?(s=r.search,e(N('Search results for "'.concat(i,'"')))):(s=r.popular,e(N("Popular films"))),fetch(s).then((function(t){return t.json()})).then((function(t){var a=t.errors?null:k(t.results,e);return e(g(a)),0===a.length?(e(N('Nothing was found for "'.concat(i,'"'))),e(g(c))):null})),e(L("")),setTimeout((function(){return e(B(!1))}),700)}},k=function(t,e){var a=t.map((function(t){var e=t.title,a=t.name;return{name:e||a,poster_path:t.poster_path,genre_ids:t.genre_ids,id:t.id,inWatch:!1}}));var n=JSON.parse(window.localStorage.getItem("watchList"));return!0===(null!==n)?(e(y(n)),a.map((function(t){return function(t){var e=n.find((function(e){return e.id===t.id}));return!0===Boolean(e)?e:t}(t)}))):a},I=function(t,e,a,n){return function(i,c){var s,r=c().filmApi.watchList,o=!0===!!(void 0===t&&void 0===e&&void 0===a)?(s=n,r.filter((function(t){return t.id!==s}))):function(i,c){var s={name:t,poster_path:e,genre_ids:a,id:n,inWatch:!0};return r.push(s),Object(b.a)(new Map(i.map((function(t){return[t[c],t]}))).values())}(r,"id");return localStorage.setItem("watchList",JSON.stringify(o)),i(y(o))}},T=a.p+"static/media/search.207a0bfb.svg",A=a(0),F=function(){var t=Object(s.b)(),e=Object(s.c)((function(t){return t.filmApi.searchFilm}));return Object(A.jsxs)("div",{className:m.a.inputBlock,children:[Object(A.jsx)("input",{className:m.a.input,placeholder:"Search film",name:"query",id:"gender",onKeyPress:function(e){return function(e){"Enter"===e.key&&""!==e.target.value&&t(W())}(e)},onInput:function(e){return t(L(e.target.value))}}),Object(A.jsx)("button",{className:m.a.searchBtn,onClick:function(){return""!==e?t(W()):null},children:Object(A.jsx)("img",{src:T,alt:"search icon"})})]})},w=a(4),D=a.n(w),P=function(t){var e=t.active,a=Object(s.c)((function(t){return t.filmApi.filmPageTitle})),n=a.includes("Search results for")||a.includes("Nothing was found for")?"Finding films":e.active,i=Object(s.b)();switch(n){case"popular":return Object(A.jsxs)("div",{id:"navbar",className:D.a.navbar,children:[Object(A.jsxs)("div",{className:D.a.navbarBlock,children:[Object(A.jsx)(r.b,{id:"popular",to:"/movie-app",className:"".concat(D.a.navbarLink," ").concat(D.a.active),children:"Popular"}),Object(A.jsx)(r.b,{id:"watch",to:"/movie-app/watch-list",className:D.a.navbarLink,children:"Watch list"})]}),Object(A.jsx)(F,{})]});case"watch":return Object(A.jsxs)("div",{id:"navbar",className:D.a.navbar,children:[Object(A.jsxs)("div",{className:D.a.navbarBlock,children:[Object(A.jsx)(r.b,{id:"popular",to:"/movie-app",className:D.a.navbarLink,onClick:function(){return i(W(!0))},children:"Popular"}),Object(A.jsx)(r.b,{id:"watch",to:"/movie-app/watch-list",className:"".concat(D.a.navbarLink," ").concat(D.a.active),children:"Watch list"})]}),Object(A.jsx)("div",{className:D.a.emptyInput})]});case"Finding films":return Object(A.jsxs)("div",{id:"navbar",className:D.a.navbar,children:[Object(A.jsxs)("div",{className:D.a.navbarBlock,children:[Object(A.jsx)(r.b,{id:"popular",to:"/movie-app",className:D.a.navbarLink,onClick:function(){return i(W(!0))},children:"Popular"}),Object(A.jsx)(r.b,{id:"watch",to:"/movie-app/watch-list",className:D.a.navbarLink,children:"Watch list"})]}),Object(A.jsx)(F,{})]});default:return Object(A.jsxs)("div",{id:"navbar",className:D.a.navbar,children:[Object(A.jsxs)("div",{className:D.a.navbarBlock,children:[Object(A.jsx)(r.b,{id:"popular",to:"/movie-app",className:D.a.navbarLink,onClick:function(){return i(W(!0))},children:"Popular"}),Object(A.jsx)(r.b,{id:"watch",to:"/movie-app/watch-list",className:D.a.navbarLink,children:"Watch list"})]}),Object(A.jsx)("div",{className:D.a.emptyInput})]})}},S=function(t){return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("header",{className:j.a.header,children:[Object(A.jsx)("h1",{className:j.a.logo,children:"Movie api"}),Object(A.jsx)(P,{active:t})]})})},C=a(23),E=a.n(C),H=function(){return Object(A.jsx)("div",{className:E.a.spinnerBlock,children:Object(A.jsx)("div",{className:E.a.spinner})})},M=a(9),X=a(16),J=a.n(X),R={detailsInWatch:{type:"detailsInWatch",text:Object(A.jsxs)("span",{children:["Delete from ",Object(A.jsx)("br",{})," watch list"]})},detailsNotInWatch:{type:"detailsNotInWatch",text:Object(A.jsxs)("span",{children:["Add to",Object(A.jsx)("br",{})," watch list"]})}},G=function(t){var e=t.name,a=t.image,i=t.genre,c=t.id,r=t.buttonType,o=Object(s.b)(),l=Object(n.useState)(),d=Object(M.a)(l,2),u=d[0],j=d[1];return(void 0===u?r:u)?Object(A.jsx)("button",{type:"button",className:"".concat(J.a.detailsBtn," ").concat(J.a.detailsNotInWatch),onClick:function(){o(I(e,a,i,c)),j(!1)},children:R.detailsNotInWatch.text}):Object(A.jsx)("button",{type:"button",className:"".concat(J.a.detailsBtn," ").concat(J.a.detailsInWatch),onClick:function(){o(I(void 0,void 0,void 0,c)),j(!0)},children:R.detailsInWatch.text})};function U(t){function e(t){switch(t){case 28:return"Action";case 12:return"Adventure";case 16:return"Cartoons";case 35:return"Comedy";case 80:return"Crime";case 99:return"Documentary";case 18:return"Drama";case 10751:return"Family";case 14:return"Fantasy";case 36:return"Historical";case 27:return"Horror";case 10402:return"Musical";case 9648:return"Mystic";case 10749:return"Romantic";case 878:return"Science fiction";case 10770:return"Telecast";case 53:return"Thriller";case 10752:return"Military";case 10759:return"Action & Adventure";case 10764:return"On real events";case 10762:return"Child";case 10763:return"News";case 10765:return"Science fiction and fantasy";case 10766:return"Melodrama";case 10767:return"Podcast";case 10768:return"War and politics";case 37:return"Western";default:return}}return t.map((function(a,n){return t.length>=1?n<t.length-1?Object(A.jsxs)("span",{children:[e(a),", "]},n):Object(A.jsx)("span",{children:e(a)},n):null}))}var z=function(t){var e=t.property,a=t.value;return Object(A.jsxs)("div",{className:d.a.detailItem,children:[Object(A.jsxs)("p",{className:d.a.detailProperty,children:[e,": "]}),Object(A.jsx)("p",{children:a})]})},K=function(t){var e=JSON.parse(window.localStorage.getItem("watchList")),a=null!==e&&e.find((function(e){return e.id===t}));return!Boolean(a)},Q=function(){var t=Object(s.b)(),e=Object(o.g)(),a=Object(o.e)();console.log(a),Object(n.useEffect)((function(){t(B(!0));var a="https://api.themoviedb.org/3/movie/".concat(e.id,"?api_key=4d0c68776909a3f926088d7ddf14c097");fetch(a).then((function(t){return t.json()})).then((function(e){return t({type:O,payload:e}),setTimeout((function(){return t(B(!1))}),700)}))}),[t,e.id]);var i=Object(s.c)((function(t){return t.filmApi.filmDetails})),c=Object(s.c)((function(t){return t.filmApi.loading})),r=void 0!==i.genres&&null!==i.genres&&""!==i.genres,l=r?i.genres.map((function(t){return t.id})):null,u=r?U(i.genres.map((function(t){return t.id}))):null;return Object(A.jsx)(A.Fragment,{children:c?Object(A.jsx)(H,{}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(S,{}),Object(A.jsxs)("div",{className:d.a.filmDetailsMain,children:[Object(A.jsxs)("div",{className:d.a.header,children:[Object(A.jsx)("div",{className:d.a.headerBlock,children:Object(A.jsx)("h1",{className:d.a.filmName,children:i.title})}),Object(A.jsx)(G,{name:i.title,image:i.poster_path,genre:l,id:i.id,buttonType:K(i.id)})]}),Object(A.jsxs)("div",{className:d.a.main,children:[Object(A.jsx)("img",{src:"https://image.tmdb.org/t/p/w500/".concat(i.poster_path),alt:"\u041f\u043e\u0441\u0442\u0435\u0440 \u043a \u0444\u0438\u043b\u044c\u043c\u0443 ".concat(i.title),className:d.a.poster}),Object(A.jsxs)("div",{className:d.a.detailBlock,children:[Object(A.jsx)(z,{property:"Jenres",value:u}),Object(A.jsx)(z,{property:"Production",value:i.production_companies.map((function(t){return'"'.concat(t.name,'" ')}))}),Object(A.jsx)(z,{property:"Runtime",value:"".concat(i.runtime," minutes")}),Object(A.jsx)(z,{property:"Review",value:i.overview})]})]})]})]})})},q=a(14),Y=a.n(q),Z=a(11),V=a.n(Z),$=a.p+"static/media/check-circle.589a7a40.svg",tt=a.p+"static/media/plus.1a0b65ab.svg",et={class:"inWatch",tooltip:"Remove from Watch list"},at={class:"notInWatch",tooltip:"Add to Watch list"},nt=function(t){var e=t.name,a=t.image,i=t.genre,c=t.id,r=t.buttonType,o=Object(s.b)(),l=Object(n.useState)(),d=Object(M.a)(l,2),u=d[0],j=d[1],p=Object(n.useState)(at.tooltip),m=Object(M.a)(p,2),b=m[0],h=m[1];return(void 0===u?r:u)?Object(A.jsxs)("button",{type:"button",className:V.a.addIconBtn,children:[Object(A.jsx)("img",{src:$,alt:at.tooltip,className:V.a.inWatch,onClick:function(){o(I(void 0,void 0,void 0,c)),j(!1),h(at.tooltip)}}),Object(A.jsx)("div",{className:"".concat(V.a.tooltip," ").concat(V.a.tooltipLeft),children:Object(A.jsx)("p",{children:!0===r?et.tooltip:b})})]}):Object(A.jsxs)("button",{type:"button",className:V.a.addIconBtn,children:[Object(A.jsx)("img",{src:tt,alt:"Add to watch list",className:"".concat(V.a.addIcon," ").concat(V.a.notInWatch),onClick:function(){o(I(e,a,i,c)),j(!0),h(et.tooltip)}}),Object(A.jsx)("div",{className:V.a.tooltip,children:Object(A.jsx)("p",{children:b})})]})},it=function(t){var e=t.name,a=t.image,n=t.genre,i=t.id,c=t.buttonType,o=Object(s.b)(),l=0!==n.length?Object(A.jsxs)("p",{children:["Genre: ",U(n)]}):null;return null!==a?Object(A.jsxs)("div",{className:Y.a.cardBlock,children:[Object(A.jsxs)(r.b,{to:"/movie-app/".concat(i),className:Y.a.filmListCard,onClick:function(){return o(B(!0))},children:[Object(A.jsx)("img",{src:"https://image.tmdb.org/t/p/w500/".concat(a),alt:"\u041f\u043e\u0441\u0442\u0435\u0440 \u043a \u0444\u0438\u043b\u044c\u043c\u0443 ".concat(e)}),Object(A.jsxs)("div",{className:Y.a.filmDescription,children:[Object(A.jsx)("p",{className:Y.a.filmName,children:e}),Object(A.jsx)("div",{className:Y.a.genre,children:l})]})]}),Object(A.jsx)(nt,{name:e,image:a,genre:n,id:i,buttonType:c})]}):null},ct=a(12),st=a.n(ct),rt=function(t){var e=t.filmList,a=Object(s.c)((function(t){return t.filmApi.filmPageTitle}));return e?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:st.a.popularHeader,children:Object(A.jsx)("h2",{children:a.includes("Nothing was found")?Object(A.jsxs)("span",{children:[a,Object(A.jsx)("br",{}),Object(A.jsx)("br",{}),"Previous results"]}):a})}),Object(A.jsx)("main",{children:Object(A.jsx)("div",{className:st.a.filmListBlock,children:e.map((function(t){var e=t.name,a=t.poster_path,n=t.genre_ids,i=t.id,c=t.inWatch;return Object(A.jsx)(it,{id:i,name:e,image:a,genre:n,buttonType:c},i)}))})})]}):null},ot=function(){var t=Object(s.b)(),e=Object(s.c)((function(t){return t.filmApi.filmList}));Object(n.useEffect)((function(){t(W())}),[t]);var a=Object(s.c)((function(t){return t.filmApi.loading}));return Object(A.jsx)(A.Fragment,{children:a?Object(A.jsx)(H,{}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(S,{active:"popular"}),Object(A.jsx)(rt,{filmList:e})]})})},lt=function(t){var e=t.watchList,a=void 0===e?[]:e,n=Object(s.c)((function(t){return t.filmApi.filmPageTitle}));return 0===a.length?Object(A.jsx)("div",{className:st.a.popularHeader,children:Object(A.jsxs)("h2",{children:[n," is empty"]})}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:st.a.popularHeader,children:Object(A.jsx)("h2",{children:n})}),Object(A.jsx)("main",{children:Object(A.jsx)("div",{className:st.a.filmListBlock,children:null!==a?a.map((function(t){var e=t.name,a=t.poster_path,n=t.genre_ids,i=t.id,c=t.inWatch;return Object(A.jsx)(it,{id:i,name:e,image:a,genre:n,buttonType:c},i)})):""})})]})},dt=function(){var t=Object(s.b)(),e=Object(s.c)((function(t){return t.filmApi.watchList}));return Object(n.useEffect)((function(){t(N("Watch List"));var e=window.localStorage.getItem("watchList"),a=JSON.parse(e);t(y(a))}),[t]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(S,{active:"watch"}),Object(A.jsx)(lt,{watchList:e})]})},ut=function(){return Object(A.jsx)(r.a,{children:Object(A.jsxs)(o.c,{children:[Object(A.jsx)(o.a,{path:"/movie-app",element:Object(A.jsx)(ot,{})}),Object(A.jsx)(o.a,{path:"/movie-app/:id",element:Object(A.jsx)(Q,{})}),Object(A.jsx)(o.a,{path:"/movie-app/watch-list",element:Object(A.jsx)(dt,{})})]})})},jt=(a(38),a(17)),pt=a(25),mt=a(8),bt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||jt.c,ht=Object(jt.d)(Object(jt.b)({filmApi:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filmList:[],filmPageTitle:"",searchFilm:"",filmDetails:[],watchList:[],loading:!0},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case h:return Object(mt.a)(Object(mt.a)({},t),{},{filmList:e.payload});case _:return Object(mt.a)(Object(mt.a)({},t),{},{filmPageTitle:e.payload});case f:return Object(mt.a)(Object(mt.a)({},t),{},{searchFilm:e.payload});case O:return Object(mt.a)(Object(mt.a)({},t),{},{filmDetails:e.payload});case v:return Object(mt.a)(Object(mt.a)({},t),{},{watchList:e.payload});case x:return Object(mt.a)(Object(mt.a)({},t),{},{loading:e.payload});default:return t}}}),bt(Object(jt.a)(pt.a))),_t=ht;c.a.render(Object(A.jsx)(s.a,{store:_t,children:Object(A.jsx)(ut,{})}),document.getElementById("root"))}],[[39,1,2]]]);
//# sourceMappingURL=main.114aa96c.chunk.js.map